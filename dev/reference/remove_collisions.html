<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='
A collision is an integration (aka a unique combination of the provided
mandatory_IS_vars()) which is observed in more than one
independent sample.
The function tries to decide to which independent sample should
an integration event be assigned to, and if no
decision can be taken, the integration is completely removed from the data
frame.
For more details refer to the vignette "Collision removal functionality":
vignette("workflow_start", package = "ISAnalytics")'><title>Identifies and removes collisions. — remove_collisions • ISAnalytics</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Identifies and removes collisions. — remove_collisions"><meta property="og:description" content='
A collision is an integration (aka a unique combination of the provided
mandatory_IS_vars()) which is observed in more than one
independent sample.
The function tries to decide to which independent sample should
an integration event be assigned to, and if no
decision can be taken, the integration is completely removed from the data
frame.
For more details refer to the vignette "Collision removal functionality":
vignette("workflow_start", package = "ISAnalytics")'><meta property="og:image" content="https://calabrialab.github.io/ISAnalytics/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ISAnalytics</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.7.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/ISAnalytics.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/workflow_start.html">Setting up the workflow and first steps</a>
    <a class="dropdown-item" href="../articles/sharing_analyses.html">Sharing analyses with ISAnalytics</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="https://calabrialab.github.io/ISAnalytics/">
    <span class="fas fa fas fa-code-branch"></span>
     
    RELEASE
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/calabrialab/ISAnalytics/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Identifies and removes collisions.</h1>
      <small class="dont-index">Source: <a href="https://github.com/calabrialab/ISAnalytics/blob/HEAD/R/collision-removal.R" class="external-link"><code>R/collision-removal.R</code></a></small>
      <div class="d-none name"><code>remove_collisions.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a>
A collision is an integration (aka a unique combination of the provided
<code><a href="mandatory_IS_vars.html">mandatory_IS_vars()</a></code>) which is observed in more than one
independent sample.
The function tries to decide to which independent sample should
an integration event be assigned to, and if no
decision can be taken, the integration is completely removed from the data
frame.
For more details refer to the vignette "Collision removal functionality":
<code><a href="../articles/workflow_start.html">vignette("workflow_start", package = "ISAnalytics")</a></code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">remove_collisions</span><span class="op">(</span>
  <span class="va">x</span>,
  <span class="va">association_file</span>,
  independent_sample_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ProjectID"</span>, <span class="st">"SubjectID"</span><span class="op">)</span>,
  date_col <span class="op">=</span> <span class="st">"SequencingDate"</span>,
  reads_ratio <span class="op">=</span> <span class="fl">10</span>,
  quant_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>seqCount <span class="op">=</span> <span class="st">"seqCount"</span>, fragmentEstimate <span class="op">=</span> <span class="st">"fragmentEstimate"</span><span class="op">)</span>,
  report_path <span class="op">=</span> <span class="fu"><a href="default_report_path.html">default_report_path</a></span><span class="op">(</span><span class="op">)</span>,
  max_workers <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>Either a multi-quantification matrix (recommended) or a
named list of matrices (names must be quantification types)</p></dd>
<dt>association_file</dt>
<dd><p>The association file imported via
<code><a href="import_association_file.html">import_association_file()</a></code></p></dd>
<dt>independent_sample_id</dt>
<dd><p>A character vector of column names that
identify independent samples</p></dd>
<dt>date_col</dt>
<dd><p>The date column that should be considered.</p></dd>
<dt>reads_ratio</dt>
<dd><p>A single numeric value that represents the ratio that has
to be considered when deciding between <code>seqCount</code> value.</p></dd>
<dt>quant_cols</dt>
<dd><p>A named character vector where names are
quantification types and
values are the names of the corresponding columns. The quantification
<code>seqCount</code> MUST be included in the vector.</p></dd>
<dt>report_path</dt>
<dd><p>The path where the report file should be saved.
Can be a folder or <code>NULL</code> if no report should be produced.
Defaults to <code>{user_home}/ISAnalytics_reports</code>.</p></dd>
<dt>max_workers</dt>
<dd><p>Maximum number of parallel workers to distribute the
workload. If <code>NULL</code> (default) produces the maximum amount of workers allowed,
a numeric value is requested otherwise. WARNING: a higher number of workers
speeds up computation at the cost of memory consumption! Tune this parameter
accordingly.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Either a multi-quantification matrix or a list of data frames</p>
    </div>
    <div class="section level2">
    <h2 id="required-tags">Required tags<a class="anchor" aria-label="anchor" href="#required-tags"></a></h2>
    

<p>The function will explicitly check for the presence of these tags:</p><ul><li><p>project_id</p></li>
<li><p>pool_id</p></li>
<li><p>pcr_replicate</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other Data cleaning and pre-processing: 
<code><a href="aggregate_metadata.html">aggregate_metadata</a>()</code>,
<code><a href="aggregate_values_by_key.html">aggregate_values_by_key</a>()</code>,
<code><a href="compute_near_integrations.html">compute_near_integrations</a>()</code>,
<code><a href="default_meta_agg.html">default_meta_agg</a>()</code>,
<code><a href="outlier_filter.html">outlier_filter</a>()</code>,
<code><a href="outliers_by_pool_fragments.html">outliers_by_pool_fragments</a>()</code>,
<code><a href="purity_filter.html">purity_filter</a>()</code>,
<code><a href="realign_after_collisions.html">realign_after_collisions</a>()</code>,
<code><a href="threshold_filter.html">threshold_filter</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"integration_matrices"</span>, package <span class="op">=</span> <span class="st">"ISAnalytics"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"association_file"</span>, package <span class="op">=</span> <span class="st">"ISAnalytics"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">no_coll</span> <span class="op">&lt;-</span> <span class="fu">remove_collisions</span><span class="op">(</span></span>
<span class="r-in">    x <span class="op">=</span> <span class="va">integration_matrices</span>,</span>
<span class="r-in">    association_file <span class="op">=</span> <span class="va">association_file</span>,</span>
<span class="r-in">    report_path <span class="op">=</span> <span class="cn">NULL</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Identifying collisions...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Processing collisions...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |                                                                      |   0%  |                                                                              |=======                                                               |  10%  |                                                                              |==============                                                        |  20%  |                                                                              |=====================                                                 |  30%  |                                                                              |============================                                          |  40%  |                                                                              |===================================                                   |  50%  |                                                                              |==========================================                            |  60%  |                                                                              |=================================================                     |  70%  |                                                                              |========================================================              |  80%  |                                                                              |===============================================================       |  90%  |                                                                              |======================================================================| 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Finished!</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">no_coll</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    chr integration_locus strand GeneName GeneStrand</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:   1          27058748      -   ARID1A          +</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:   1          27058748      -   ARID1A          +</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:   1          27058748      -   ARID1A          +</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:   1          27058748      -   ARID1A          +</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:   1          45915674      -    TESK2          -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:   1          45915674      -    TESK2          -</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                 CompleteAmplificationID</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:  PJ01_POOL01_LTR37LC2_PT001_PT001-107_lenti_GLOBE_BM_1_SLiM_0060_MNC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: PJ01_POOL01_LTR83LC46_PT001_PT001-107_lenti_GLOBE_BM_1_SLiM_0060_MNC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: PJ01_POOL01_LTR85LC54_PT001_PT001-107_lenti_GLOBE_BM_1_SLiM_0060_MNC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: PJ01_POOL01_LTR77LC46_PT001_PT001-103_lenti_GLOBE_PB_1_SLiM_0060_MNC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:  PJ01_POOL01_LTR77LC56_PT001_PT001-93_lenti_GLOBE_PB_1_SLiM_0030_MNC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: PJ01_POOL01_LTR93LC56_PT001_PT001-112_lenti_GLOBE_PB_1_SLiM_0090_MNC</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    seqCount fragmentEstimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:     3583        13.197321</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:     2978         8.058272</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:     2006         7.046978</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:        3         3.013293</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:    15614         8.086461</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:        4         1.000988</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Andrea Calabria, Giulio Spinozzi, Giulia Pais.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

